<div class="headless-edit-webhook-overlay" ng-controller="Umbraco.Editors.Webhooks.EditController as vm">
  <umb-editor-view>
    <ng-form name="editWebhookForm" novalidate val-form-manager>
      <umb-editor-header
        name="model.title"
        name-locked="true"
        hide-alias="true"
        hide-icon="true"
        hide-description="true">
      </umb-editor-header>
      <umb-editor-container>
        <umb-box>
          <umb-box-content>
            <umb-load-indicator ng-if="vm.loading"></umb-load-indicator>
            <div ng-hide="vm.loading" style="margin-top: 20px;">
              <umb-control-group label="Url" description="The url to call when the webhook is triggered." alias="webhookUrl" required="true">
                <input type="url"
                       data-element="webhook-url"
                       name="webhookUrl"
                       ng-model="model.webhook.url"
                       class="umb-property-editor umb-textstring"
                       no-dirty-check
                       focus-on-filled="true"
                       placeholder="https://example.com/api/webhook"
                       umb-auto-focus
                       required />
              </umb-control-group>

              <umb-control-group label="Event" description="The event for which the webhook should be triggered." alias="webhookEvent" required="true">
                <select ng-options="event for event in model.events"
                        data-element="webhook-event"
                        class="umb-property-editor umb-dropdown"
                        name="webhookEvent"
                        ng-focus="oldValue=model.webhook.event"
                        ng-model="model.webhook.event"
                        ng-change="vm.eventChanged(model.webhook.event, oldValue)"
                        class="umb-editor"
                        no-dirty-check
                        required>
                  <option></option>
                </select>
              </umb-control-group>

              <umb-control-group label="Content Type" description="Only trigger the webhook for a specific content type." alias="webhookContentType">
                 <umb-node-preview
                   ng-repeat="contentType in model.contentTypes"
                  ng-show="contentType"
                  icon="contentType.icon"
                  name="contentType.name"
                  alias="contentType.alias"
                  description="contentType.description"
                  allow-remove="true"
                  allow-open="false"
                  on-remove="vm.clearContentType(contentType.key)">
                </umb-node-preview>
                <a href
                   ng-show="(!model.contentTypes || model.contentTypes.length === 0) && model.webhook.event"
                   class="umb-node-preview-add"
                   ng-click="vm.openContentTypePicker()"
                   prevent-default>
                  <localize key="general_add">Add</localize>
                </a>
                <span class="umb-node-preview-add" ng-show="!model.webhook.event">Please select an event first.</span>
              </umb-control-group>

              <umb-control-group label="Enabled" description="Is the webhook enabled?" alias="webhookEnabled">
                <umb-toggle
                  checked="model.webhook.enabled"
                  on-click="model.webhook.enabled = !model.webhook.enabled">
                </umb-toggle>
              </umb-control-group>
            </div>
          </umb-box-content>
        </umb-box>
      </umb-editor-container>
      <umb-editor-footer>
        <umb-editor-footer-content-right>
          <umb-button
            type="button"
            button-style="link"
            label-key="general_close"
            shortcut="esc"
            action="vm.close()">
          </umb-button>
          <umb-button
            type="button"
            button-style="action"
            disabled="disableSubmitButton"
            label="{{model.submitButtonLabel}}"
            state="model.submitButtonState"
            action="vm.submit(model)">
          </umb-button>
        </umb-editor-footer-content-right>
      </umb-editor-footer>
    </ng-form>
  </umb-editor-view>
</div>
